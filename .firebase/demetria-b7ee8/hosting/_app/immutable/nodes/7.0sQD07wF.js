import"../chunks/CWj6FrbW.js";import"../chunks/Cq413IwQ.js";import{ay as $,az as O,u as G,af as J,F as N,P as b,aA as U,p as X,f as S,t as W,g as a,h as B,a as k,b as Z,c as o,s as v,m as I,r as n,aB as ee,q as te,i as f,d as A}from"../chunks/DwrOsFMw.js";import{i as ae}from"../chunks/DUkvA1To.js";import{e as se,i as re}from"../chunks/C0bVeHgr.js";import{s as C}from"../chunks/CLvUpu97.js";import{i as ie}from"../chunks/Bjby1I7B.js";function oe(e,c,u=c){var l=new WeakSet;$(e,"input",async s=>{var r=s?e.defaultValue:e.value;if(r=j(e)?E(r):r,u(r),b!==null&&l.add(b),await O(),r!==(r=c())){var x=e.selectionStart,p=e.selectionEnd;e.value=r??"",p!==null&&(e.selectionStart=x,e.selectionEnd=Math.min(p,e.value.length))}}),(N&&e.defaultValue!==e.value||G(c)==null&&e.value)&&(u(j(e)?E(e.value):e.value),b!==null&&l.add(b)),J(()=>{var s=c();if(e===document.activeElement){var r=U??b;if(l.has(r))return}j(e)&&s===E(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function j(e){var c=e.type;return c==="number"||c==="range"}function E(e){return e===""?null:+e}var ne=S('<div><div><div class="flex items-start gap-2 mb-1"><span class="text-lg"> </span> <span class="font-bold text-sm"> </span></div> <p class="text-sm leading-relaxed whitespace-pre-wrap"> </p></div></div>'),le=S('<div class="flex justify-start"><div class="bg-[#f5f5f5] rounded-lg p-4 sketch-box"><div class="flex items-center gap-2"><span class="text-lg">ðŸ¤–</span> <span class="text-sm text-[#666]">Thinking...</span> <div class="flex gap-1"><div class="w-2 h-2 bg-[#2e7d32] rounded-full animate-bounce" style="animation-delay: 0ms;"></div> <div class="w-2 h-2 bg-[#2e7d32] rounded-full animate-bounce" style="animation-delay: 150ms;"></div> <div class="w-2 h-2 bg-[#2e7d32] rounded-full animate-bounce" style="animation-delay: 300ms;"></div></div></div></div></div>'),de=S('<div class="max-w-5xl"><div class="mb-6 flex justify-between items-start"><div><h2 class="text-4xl font-bold pencil-text text-[#2e7d32] sketch-underline inline-block">DemetriA IQ</h2> <p class="text-lg text-[#666] mt-2">Your AI-powered agricultural assistant</p></div> <a href="/iq/history" class="sketch-button bg-[#fff8e1] text-[#f57c00] px-5 py-3 font-bold hover:bg-[#ffecb3]">ðŸ“œ View History</a></div> <div><div class="sketch-box p-6 bg-white" style="height: 700px; display: flex; flex-direction: column;"><div id="chat-container" class="flex-1 overflow-y-auto mb-4 space-y-4 pr-2 svelte-1krw3oj"><!> <!></div> <div class="border-t-2 border-[#333] pt-4" style="border-radius: 255px 15px 225px 15px/15px 225px 15px 255px;"><div class="flex gap-2"><textarea placeholder="Ask me anything about agriculture..." class="flex-1 p-3 border-2 border-[#333] rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-[#2e7d32]" rows="2"></textarea> <button class="sketch-button bg-[#2e7d32] text-white px-6 py-3 font-bold hover:bg-[#1b5e20] disabled:opacity-50 disabled:cursor-not-allowed">Send</button></div> <p class="text-xs text-[#666] mt-2">Press Enter to send, Shift+Enter for new line</p></div></div></div></div>');function be(e,c){X(c,!1);let u=I([{role:"assistant",content:"Hello! I'm DemetriA IQ, your agricultural AI assistant. Ask me anything about farming, crops, soil management, pest control, or any agricultural topic!"}]),l=I(""),s=I(!1);const r={wheat:"Wheat is best planted in fall or early spring depending on your climate. It requires well-drained soil with a pH of 6.0-7.0. Make sure to rotate crops to prevent disease buildup.",fertilizer:"For optimal results, use nitrogen-rich fertilizers during the vegetative stage. Consider organic options like compost or manure. Soil testing will help determine exact nutrient needs.",pest:"Integrated Pest Management (IPM) is recommended. Start with monitoring, use natural predators when possible, and only resort to pesticides when necessary. Regular field inspections are key.",irrigation:"Drip irrigation is most water-efficient. Water early morning or evening to reduce evaporation. Monitor soil moisture levels and adjust based on weather conditions.",soil:"Healthy soil is the foundation of good farming. Test pH levels regularly, add organic matter, practice crop rotation, and avoid over-tilling to maintain soil structure.",default:"That's a great question! Based on agricultural best practices, I recommend consulting with local agricultural extension services for region-specific advice. Would you like me to provide more general information on this topic?"};function x(t){const d=t.toLowerCase();for(const[i,g]of Object.entries(r))if(d.includes(i))return g;return r.default}async function p(){if(!a(l).trim()||a(s))return;f(u,[...a(u),{role:"user",content:a(l)}]);const t=a(l);f(l,""),f(s,!0),await new Promise(i=>setTimeout(i,1e3));const d=x(t);f(u,[...a(u),{role:"assistant",content:d}]),f(s,!1),setTimeout(()=>{const i=document.getElementById("chat-container");i&&(i.scrollTop=i.scrollHeight)},100)}function R(t){t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),p())}ie();var h=de(),H=v(o(h),2),M=o(H),y=o(M),P=o(y);se(P,1,()=>a(u),re,(t,d)=>{var i=ne(),g=o(i),_=o(g),w=o(_),K=o(w,!0);n(w);var z=v(w,2),L=o(z,!0);n(z),n(_);var Q=v(_,2),Y=o(Q,!0);n(Q),n(g),n(i),W(()=>{C(i,1,`flex ${a(d).role==="user"?"justify-end":"justify-start"}`),C(g,1,`max-w-[80%] ${a(d).role==="user"?"bg-[#a5d6a7] text-[#1b5e20]":"bg-[#f5f5f5] text-[#333]"} rounded-lg p-4 sketch-box`),A(K,a(d).role==="user"?"ðŸ‘¤":"ðŸ¤–"),A(L,a(d).role==="user"?"You":"DemetriA IQ"),A(Y,a(d).content)}),k(t,i)});var V=v(P,2);{var F=t=>{var d=le();k(t,d)};ae(V,t=>{a(s)&&t(F)})}n(y);var T=v(y,2),q=o(T),m=o(q);ee(m);var D=v(m,2);n(q),te(2),n(T),n(M),n(H),n(h),W(t=>{m.disabled=a(s),D.disabled=t},[()=>!a(l).trim()||a(s)]),oe(m,()=>a(l),t=>f(l,t)),B("keypress",m,R),B("click",D,p),k(e,h),Z()}export{be as component};
